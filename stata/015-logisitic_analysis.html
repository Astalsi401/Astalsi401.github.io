<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-F8SLV521P4"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-F8SLV521P4');
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>邏輯分析</title>
    <link rel="stylesheet" type="text/css" href="../assets/style/main.css">
</head>

<body>
    <header>
        <div id="top"></div>
        <div id="stataPage" class="sidebar"></div>
        <div id="plate"></div>
        <div class="largePic">
            <div id="pic"></div>
        </div>
    </header>
    <main class="container">
        <h2 data-type="title_1" id="015">邏輯分析（Logistic Analysis）</h2>
        <div id="showCode">本頁do file</div>
        <pre id="code"><code>
cd data
use "tracking.dta", clear
cd ..
ta college atrack

cap drop acad
g acad = (8/6)/(3/15)
di acad "倍"

cap drop nadac
g nadac = (3/15)/(8/6)
di "0" nadac "倍"

/*從Odds Ratio轉換成對數*/
di log(6.6666665)
/*從對數轉為Odds Ratio*/
di exp(1.89712)

logit college atrack
predict prob, pr
ta prob

margins, at(atrack=(0 1))

logit college atrack male gpa chinese, or /*or:以odds ratio顯示，預設為對數*/
/*Pseudo R2: 可解釋的改變量*/

margins, at(gpa=(2(.5)4) atrack=(0 1)) atmeans /*繪圖*/
marginsplot, ylabel(0(.2)1, angle(0)) noci

cd data
use "GSS2012.dta", clear
cd ..
ta healthre
ologit healthre i.maritals age educ i.male

forvalue i=1/4{
margins, at(age=(20(5)60) educ=(6)) atmeans predict(outcome(`i'))
matrix b`i'=r(b)' /*建立名為b1~b4的矩陣以儲存healthre中的資料*/
}

cd data
use "nomocc2.dta", clear
cd ..
numlabel _all, add
ta occ
mlogit occ white ed exper, base(5) nolog rrr /*以occ的第五項（Prof）作為比較對項*/

margins, at(ed=(3(1)20) white=(0 1)) atmeans predict(outcome(1)) /* atmeans:沒有出現在這便的變項全部採用平均值 */

marginsplot, noci title("種族與成為低階工人的機率") ///
xlabel(3(1)20) ylabel(0(0.1)0.4, angle(0))
graph export logit03.png, replace

eststo clear
eststo M1: mlogit occ white, base(5) nolog rrr
eststo M2: mlogit occ white ed exper, base(5) nolog rrr
esttab M1 M2, eform se scalars(ll aic bic) mtitles label legend style(fixed) ///
varwidth(35) modelwidth(10) ///
starlevels(* .05 ** .01 *** 0.001)

esttab M1 M2 using mlogit01.csv, eform se mtitles legend style(fixed) ///
varwidth(35) modelwidth(10) ///
starlevels(* .05 ** .01 *** 0.001) replace

        </code></pre>
        <section>
            <h3 data-type="title_2" id="15-1">Odds Ratio</h3>
            <p>在logistic analysis分析中，應變項必須是0或者1（有/無、是/否），自變項可以使用類別變項，也可以使用連續變項。所得到的結果更可以轉換成為機率（Odds Ratio）的概念解讀。</p>
            <p><b>範例：</b></p>
            <pre id="stlog-1" class="stlog"><samp><span class="stinp">. cd data</span>
<span class="stres">C:\Users\misti\Documents\Stata\unify\data</span>

<span class="stinp">. use "tracking.dta", clear</span>

<span class="stinp">. cd ..</span>
<span class="stres">C:\Users\misti\Documents\Stata\unify</span>

<span class="stinp">. ta college atrack</span>

            |  Tracks in High Sch
    College | Non-acade  Academic  |     Total
------------+----------------------+----------
Non-college |<span class="stres">        15          6 </span>|<span class="stres">        21 </span>
    College |<span class="stres">         3          8 </span>|<span class="stres">        11 </span>
------------+----------------------+----------
      Total |<span class="stres">        18         14 </span>|<span class="stres">        32 </span>

</samp></pre>
            <p>若詢問：升學班的人上大學大學的機率是其他人的幾倍？</p>
            <pre id="stlog-2" class="stlog"><samp><span class="stinp">. cap drop acad</span>

<span class="stinp">. g acad = (8/6)/(3/15)</span>

<span class="stinp">. di acad "倍"</span>
<span class="stres">6.6666665倍</span>
</samp></pre>
            <p>相對的，非升學班上大學的機率是：</p>
            <pre id="stlog-3" class="stlog"><samp><span class="stinp">. cap drop nadac</span>

<span class="stinp">. g nadac = (3/15)/(8/6)</span>

<span class="stinp">. di "0" nadac "倍"</span>
<span class="stres">0.15000001倍</span>
</samp></pre>
            <p>由此我們可知：</p>
            <ul>
                <li>Odds Ratio一定大於0</li>
                <li>當Odds Ratio&lt;1，失敗機具較高</li>
                <li>當Odds Ratio=1，成功與失敗機率各半</li>
                <li>當Odds Ratio&gt;1，成功機率較高</li>
                <li>Odds Ratio值域沒有上限</li>
                <p>當遇到較廣闊的值域時，習慣轉換成對數</p>
                <pre id="stlog-4" class="stlog"><samp><span class="stinp">. <span class="stcmt">/*從Odds Ratio轉換成對數*/</span></span>
<span class="stinp">. di log(6.6666665)</span>
<span class="stres">1.89712</span>

<span class="stinp">. </span>
<span class="stinp">. <span class="stcmt">/*從對數轉為Odds Ratio*/</span></span>
<span class="stinp">. di exp(1.89712)</span>
<span class="stres">6.6666668</span>
</samp></pre>
                <h3 data-type="title_2">計算機率</h3>
                <p>若想要直接計算機率，而非機率的比值，有以下幾種方法：</p>
                <ol type="i">
                    <li>在執行<code>logit</code>分析後輸入<code>predict prob, pr</code></li>
                    <pre id="stlog-5" class="stlog"><samp><span class="stinp">. logit college atrack</span>

Iteration 0:   log likelihood = <span class="stres"> -20.59173</span>  
Iteration 1:   log likelihood = <span class="stres">-17.721515</span>  
Iteration 2:   log likelihood = <span class="stres">-17.670932</span>  
Iteration 3:   log likelihood = <span class="stres">-17.670815</span>  
Iteration 4:   log likelihood = <span class="stres">-17.670815</span>  

Logistic regression                             Number of obs     = <span class="stres">        32</span>
                                                LR chi2(<span class="stres">1</span>)        = <span class="stres">      5.84</span>
                                                Prob &gt; chi2       = <span class="stres">    0.0156</span>
Log likelihood = <span class="stres">-17.670815</span>                     Pseudo R2         = <span class="stres">    0.1418</span>

------------------------------------------------------------------------------
     college |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      atrack |<span class="stres">    1.89712    .831665     2.28   0.023     .2670865    3.527153</span>
       _cons |<span class="stres">  -1.609438   .6324555    -2.54   0.011    -2.849028   -.3698478</span>
------------------------------------------------------------------------------

<span class="stinp">. predict prob, pr</span>

<span class="stinp">. ta prob</span>

Pr(college) |      Freq.     Percent        Cum.
------------+-----------------------------------
   .1666667 |<span class="stres">         18       56.25       56.25</span>
   .5714286 |<span class="stres">         14       43.75      100.00</span>
------------+-----------------------------------
      Total |<span class="stres">         32      100.00</span>
</samp></pre>
                    <li><code>margins</code></li>
                    <p>也適用於ordinal logistic</p>
                    <pre id="stlog-6" class="stlog"><samp><span class="stinp">. margins, at(atrack=(0 1))</span>

Adjusted predictions                            Number of obs     = <span class="stres">        32</span>
Model VCE    : <span class="stres">OIM</span>

Expression   : <span class="stres">Pr(college), predict()</span>

1._at        : atrack<span class="stres">          </span>=<span class="stres">           0</span>

2._at        : atrack<span class="stres">          </span>=<span class="stres">           1</span>

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         _at |
          1  |<span class="stres">   .1666667    .087841     1.90   0.058    -.0054986     .338832</span>
          2  |<span class="stres">   .5714286     .13226     4.32   0.000     .3122037    .8306534</span>
------------------------------------------------------------------------------
</samp></pre>
                </ol>
            </ul>
        </section>
        <section>
            <h3 data-type="title_2" id="15-2">二元邏輯迴歸（Logistic Regression）</h3>
            <pre id="stlog-7" class="stlog"><samp><span class="stinp">. logit college atrack male gpa chinese, or  <span class="stcmt">/*or:以odds ratio顯示，預設為對數*/</span></span>

Iteration 0:   log likelihood = <span class="stres"> -20.59173</span>  
Iteration 1:   log likelihood = <span class="stres">-13.063015</span>  
Iteration 2:   log likelihood = <span class="stres"> -12.63741</span>  
Iteration 3:   log likelihood = <span class="stres">-12.627923</span>  
Iteration 4:   log likelihood = <span class="stres">-12.627905</span>  
Iteration 5:   log likelihood = <span class="stres">-12.627905</span>  

Logistic regression                             Number of obs     = <span class="stres">        32</span>
                                                LR chi2(<span class="stres">4</span>)        = <span class="stres">     15.93</span>
                                                Prob &gt; chi2       = <span class="stres">    0.0031</span>
Log likelihood = <span class="stres">-12.627905</span>                     Pseudo R2         = <span class="stres">    0.3867</span>

------------------------------------------------------------------------------
     college | Odds Ratio   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      atrack |<span class="stres">   10.90221   11.57428     2.25   0.024     1.360942    87.33516</span>
        male |<span class="stres">   2.068618   2.206442     0.68   0.496     .2557213    16.73377</span>
         gpa |<span class="stres">   17.48493   22.27269     2.25   0.025     1.440074    212.2967</span>
     chinese |<span class="stres">   1.038946    .049211     0.81   0.420     .9468358    1.140017</span>
       _cons |<span class="stres">   6.66e-07   3.61e-06    -2.62   0.009     1.60e-11     .027769</span>
------------------------------------------------------------------------------
Note: <span class="stres">_cons</span> estimates baseline odds.

<span class="stinp">. <span class="stcmt">/*Pseudo R2: 可解釋的改變量*/</span></span>
</samp></pre>
            <p>從表中可知，控制性別、班級、成績、中文成績之後，升學班進入大學的機率比非升學班高10.90221倍，其餘數值依此類推。</p>
            <pre id="stlog-8" class="stlog"><samp><span class="stinp">. margins, at(gpa=(2(.5)4) atrack=(0 1)) atmeans <span class="stcmt">/*繪圖*/</span></span>

Adjusted predictions                            Number of obs     = <span class="stres">        32</span>
Model VCE    : <span class="stres">OIM</span>

Expression   : <span class="stres">Pr(college), predict()</span>

1._at        : atrack<span class="stres">          </span>=<span class="stres">           0</span>
               male<span class="stres">            </span>=<span class="stres">      .46875 </span>(mean)
               gpa<span class="stres">             </span>=<span class="stres">           2</span>
               chinese<span class="stres">         </span>=<span class="stres">       72.75 </span>(mean)

2._at        : atrack<span class="stres">          </span>=<span class="stres">           0</span>
               male<span class="stres">            </span>=<span class="stres">      .46875 </span>(mean)
               gpa<span class="stres">             </span>=<span class="stres">         2.5</span>
               chinese<span class="stres">         </span>=<span class="stres">       72.75 </span>(mean)

3._at        : atrack<span class="stres">          </span>=<span class="stres">           0</span>
               male<span class="stres">            </span>=<span class="stres">      .46875 </span>(mean)
               gpa<span class="stres">             </span>=<span class="stres">           3</span>
               chinese<span class="stres">         </span>=<span class="stres">       72.75 </span>(mean)

4._at        : atrack<span class="stres">          </span>=<span class="stres">           0</span>
               male<span class="stres">            </span>=<span class="stres">      .46875 </span>(mean)
               gpa<span class="stres">             </span>=<span class="stres">         3.5</span>
               chinese<span class="stres">         </span>=<span class="stres">       72.75 </span>(mean)

5._at        : atrack<span class="stres">          </span>=<span class="stres">           0</span>
               male<span class="stres">            </span>=<span class="stres">      .46875 </span>(mean)
               gpa<span class="stres">             </span>=<span class="stres">           4</span>
               chinese<span class="stres">         </span>=<span class="stres">       72.75 </span>(mean)

6._at        : atrack<span class="stres">          </span>=<span class="stres">           1</span>
               male<span class="stres">            </span>=<span class="stres">      .46875 </span>(mean)
               gpa<span class="stres">             </span>=<span class="stres">           2</span>
               chinese<span class="stres">         </span>=<span class="stres">       72.75 </span>(mean)

7._at        : atrack<span class="stres">          </span>=<span class="stres">           1</span>
               male<span class="stres">            </span>=<span class="stres">      .46875 </span>(mean)
               gpa<span class="stres">             </span>=<span class="stres">         2.5</span>
               chinese<span class="stres">         </span>=<span class="stres">       72.75 </span>(mean)

8._at        : atrack<span class="stres">          </span>=<span class="stres">           1</span>
               male<span class="stres">            </span>=<span class="stres">      .46875 </span>(mean)
               gpa<span class="stres">             </span>=<span class="stres">           3</span>
               chinese<span class="stres">         </span>=<span class="stres">       72.75 </span>(mean)

9._at        : atrack<span class="stres">          </span>=<span class="stres">           1</span>
               male<span class="stres">            </span>=<span class="stres">      .46875 </span>(mean)
               gpa<span class="stres">             </span>=<span class="stres">         3.5</span>
               chinese<span class="stres">         </span>=<span class="stres">       72.75 </span>(mean)

10._at       : atrack<span class="stres">          </span>=<span class="stres">           1</span>
               male<span class="stres">            </span>=<span class="stres">      .46875 </span>(mean)
               gpa<span class="stres">             </span>=<span class="stres">           4</span>
               chinese<span class="stres">         </span>=<span class="stres">       72.75 </span>(mean)

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         _at |
          1  |<span class="stres">   .0045911   .0087693     0.52   0.601    -.0125964    .0217786</span>
          2  |<span class="stres">   .0189213    .025328     0.75   0.455    -.0307205    .0685632</span>
          3  |<span class="stres">   .0746271   .0637606     1.17   0.242    -.0503414    .1995956</span>
          4  |<span class="stres">   .2521792   .1525833     1.65   0.098    -.0468785     .551237</span>
          5  |<span class="stres">    .585076   .2733759     2.14   0.032     .0492692    1.120883</span>
          6  |<span class="stres">   .0478766   .0726943     0.66   0.510    -.0946015    .1903547</span>
          7  |<span class="stres">   .1737331   .1517106     1.15   0.252    -.1236142    .4710804</span>
          8  |<span class="stres">   .4678624   .1764073     2.65   0.008     .1221105    .8136143</span>
          9  |<span class="stres">   .7861616   .1404999     5.60   0.000     .5107868    1.061536</span>
         10  |<span class="stres">   .9389238   .0749068    12.53   0.000     .7921092    1.085738</span>
------------------------------------------------------------------------------

<span class="stinp">. marginsplot, ylabel(0(.2)1, angle(0)) noci</span>

  Variables that uniquely identify margins: gpa atrack
</samp></pre>
            <div class="img-block"><img id="logit01" src="" alt=""></div>
        </section>
        <section>
            <h3 data-type="title_2" id="15-3">順序邏輯迴歸（Ordinal Logistic Regression）</h3>
            <p>可用於Ordinal Scale的應變項。</p>
            <pre id="stlog-9" class="stlog"><samp><span class="stinp">. cd data</span>
<span class="stres">C:\Users\misti\Documents\Stata\unify\data</span>

<span class="stinp">. use "GSS2012.dta", clear</span>

<span class="stinp">. cd ..</span>
<span class="stres">C:\Users\misti\Documents\Stata\unify</span>

<span class="stinp">. ta healthre</span>

  CONDITION |
 OF HEALTH, |
     health |      Freq.     Percent        Cum.
------------+-----------------------------------
       Poor |<span class="stres">         83        6.36        6.36</span>
       Fair |<span class="stres">        275       21.06       27.41</span>
       Good |<span class="stres">        598       45.79       73.20</span>
  Excellent |<span class="stres">        350       26.80      100.00</span>
------------+-----------------------------------
      Total |<span class="stres">      1,306      100.00</span>

<span class="stinp">. ologit healthre i.maritals age educ i.male</span>

Iteration 0:   log likelihood = <span class="stres">-1579.4068</span>  
Iteration 1:   log likelihood = <span class="stres">-1513.1681</span>  
Iteration 2:   log likelihood = <span class="stres">-1512.4624</span>  
Iteration 3:   log likelihood = <span class="stres">-1512.4617</span>  
Iteration 4:   log likelihood = <span class="stres">-1512.4617</span>  

Ordered logistic regression                     Number of obs     = <span class="stres">     1,300</span>
                                                LR chi2(<span class="stres">4</span>)        = <span class="stres">    133.89</span>
                                                Prob &gt; chi2       = <span class="stres">    0.0000</span>
Log likelihood = <span class="stres">-1512.4617</span>                     Pseudo R2         = <span class="stres">    0.0424</span>

------------------------------------------------------------------------------------
          healthre |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------------+----------------------------------------------------------------
          maritals |
Currently Married  |<span class="stres">   .5140615   .1058075     4.86   0.000     .3066826    .7214404</span>
               age |<span class="stres">  -.0193044   .0030486    -6.33   0.000    -.0252795   -.0133293</span>
              educ |<span class="stres">   .1344697   .0172595     7.79   0.000     .1006417    .1682976</span>
                   |
              male |
             Male  |<span class="stres">   .0564658    .104827     0.54   0.590    -.1489912    .2619229</span>
-------------------+----------------------------------------------------------------
             /cut1 |<span class="stres">  -1.699642   .2976496                     -2.283024   -1.116259</span>
             /cut2 |<span class="stres">   .1263807   .2863167                     -.4347897    .6875511</span>
             /cut3 |<span class="stres">   2.259722   .2937011                      1.684078    2.835365</span>
------------------------------------------------------------------------------------
</samp></pre>
            <p>繪圖</p>
            <p><code>forvalue i=1/4</code>：healthre有四個選項，需要分別計算</p>
            <p><code>age=(20(5)60)</code>：x軸為年齡，從20開始，5歲為一單位，到60歲為止</p>
            <p><code>educ=(6)</code>：這張圖中只包含educ=6的樣本</p>
            <p><code>predict</code>：計算應變項（healthre）</p>
            <pre id="stlog-10" class="stlog"><samp><span class="stinp">. forvalue i=1/4{</span>
  2<span class="stinp">.         margins, at(age=(20(5)60) educ=(6)) atmeans predict(outcome(`i'))</span>
  3<span class="stinp">.         matrix b`i'=r(b)'  <span class="stcmt">/*建立名為b1~b4的矩陣以儲存healthre中的資料*/</span></span>
  4<span class="stinp">. }</span>

Adjusted predictions                            Number of obs     = <span class="stres">     1,300</span>
Model VCE    : <span class="stres">OIM</span>

Expression   : <span class="stres">Pr(healthre==1), predict(outcome(1))</span>

1._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          20</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

2._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          25</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

3._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          30</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

4._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          35</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

5._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          40</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

6._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          45</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

7._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          50</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

8._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          55</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

9._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          60</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         _at |
          1  |<span class="stres">   .0842305   .0147358     5.72   0.000     .0553489    .1131121</span>
          2  |<span class="stres">   .0919808   .0153189     6.00   0.000     .0619563    .1220053</span>
          3  |<span class="stres">   .1003661   .0159621     6.29   0.000     .0690809    .1316513</span>
          4  |<span class="stres">   .1094237   .0166886     6.56   0.000     .0767147    .1421327</span>
          5  |<span class="stres">   .1191904   .0175256     6.80   0.000     .0848409    .1535399</span>
          6  |<span class="stres">   .1297019   .0185041     7.01   0.000     .0934346    .1659692</span>
          7  |<span class="stres">    .140992   .0196569     7.17   0.000     .1024652    .1795188</span>
          8  |<span class="stres">    .153092   .0210169     7.28   0.000     .1118996    .1942844</span>
          9  |<span class="stres">   .1660297   .0226146     7.34   0.000      .121706    .2103535</span>
------------------------------------------------------------------------------

Adjusted predictions                            Number of obs     = <span class="stres">     1,300</span>
Model VCE    : <span class="stres">OIM</span>

Expression   : <span class="stres">Pr(healthre==2), predict(outcome(2))</span>

1._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          20</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

2._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          25</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

3._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          30</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

4._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          35</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

5._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          40</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

6._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          45</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

7._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          50</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

8._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          55</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

9._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          60</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         _at |
          1  |<span class="stres">   .2792741   .0280229     9.97   0.000     .2243502    .3341979</span>
          2  |<span class="stres">   .2941363   .0271285    10.84   0.000     .2409655    .3473072</span>
          3  |<span class="stres">   .3088659   .0262899    11.75   0.000     .2573387    .3603931</span>
          4  |<span class="stres">   .3233314   .0255421    12.66   0.000     .2732698    .3733931</span>
          5  |<span class="stres">    .337395   .0249092    13.55   0.000     .2885739     .386216</span>
          6  |<span class="stres">   .3509141   .0243991    14.38   0.000     .3030927    .3987356</span>
          7  |<span class="stres">   .3637447   .0240029    15.15   0.000     .3166999    .4107895</span>
          8  |<span class="stres">   .3757433   .0236954    15.86   0.000     .3293011    .4221855</span>
          9  |<span class="stres">   .3867706   .0234415    16.50   0.000      .340826    .4327151</span>
------------------------------------------------------------------------------

Adjusted predictions                            Number of obs     = <span class="stres">     1,300</span>
Model VCE    : <span class="stres">OIM</span>

Expression   : <span class="stres">Pr(healthre==3), predict(outcome(3))</span>

1._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          20</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

2._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          25</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

3._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          30</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

4._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          35</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

5._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          40</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

6._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          45</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

7._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          50</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

8._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          55</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

9._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          60</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         _at |
          1  |<span class="stres">   .4647285   .0199403    23.31   0.000     .4256463    .5038107</span>
          2  |<span class="stres">   .4554157   .0208452    21.85   0.000       .41456    .4962715</span>
          3  |<span class="stres">   .4447525   .0215809    20.61   0.000     .4024547    .4870503</span>
          4  |<span class="stres">   .4328588   .0221839    19.51   0.000     .3893792    .4763384</span>
          5  |<span class="stres">   .4198658   .0227071    18.49   0.000     .3753606     .464371</span>
          6  |<span class="stres">    .405913   .0232102    17.49   0.000     .3604219    .4514041</span>
          7  |<span class="stres">   .3911457   .0237489    16.47   0.000     .3445988    .4376927</span>
          8  |<span class="stres">   .3757126   .0243672    15.42   0.000     .3279537    .4234714</span>
          9  |<span class="stres">   .3597622   .0250908    14.34   0.000     .3105851    .4089393</span>
------------------------------------------------------------------------------

Adjusted predictions                            Number of obs     = <span class="stres">     1,300</span>
Model VCE    : <span class="stres">OIM</span>

Expression   : <span class="stres">Pr(healthre==4), predict(outcome(4))</span>

1._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          20</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

2._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          25</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

3._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          30</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

4._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          35</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

5._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          40</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

6._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          45</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

7._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          50</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

8._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          55</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

9._at        : 0.maritals<span class="stres">      </span>=<span class="stres">    .5315385 </span>(mean)
               1.maritals<span class="stres">      </span>=<span class="stres">    .4684615 </span>(mean)
               age<span class="stres">             </span>=<span class="stres">          60</span>
               educ<span class="stres">            </span>=<span class="stres">           6</span>
               0.male<span class="stres">          </span>=<span class="stres">    .5569231 </span>(mean)
               1.male<span class="stres">          </span>=<span class="stres">    .4430769 </span>(mean)

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         _at |
          1  |<span class="stres">    .171767   .0246675     6.96   0.000     .1234196    .2201144</span>
          2  |<span class="stres">   .1584671   .0222366     7.13   0.000     .1148842      .20205</span>
          3  |<span class="stres">   .1460155   .0201097     7.26   0.000     .1066012    .1854299</span>
          4  |<span class="stres">   .1343861   .0182736     7.35   0.000     .0985704    .1702017</span>
          5  |<span class="stres">   .1235489   .0167089     7.39   0.000     .0907999    .1562978</span>
          6  |<span class="stres">    .113471   .0153908     7.37   0.000     .0833055    .1436365</span>
          7  |<span class="stres">   .1041176   .0142903     7.29   0.000     .0761092     .132126</span>
          8  |<span class="stres">   .0954521   .0133754     7.14   0.000     .0692368    .1216674</span>
          9  |<span class="stres">   .0874375   .0126138     6.93   0.000     .0627148    .1121601</span>
------------------------------------------------------------------------------

<span class="stinp">. mat eastA=b1, b2, b3, b4   <span class="stcmt">/*將b1~b4合併為一個矩陣，命名為eastA*/</span></span>

<span class="stinp">. cap drop eastA1 eastA2 eastA3 eastA4 xlab</span>

<span class="stinp">. svmat eastA, name(eastA)</span>

<span class="stinp">. list eastA1 eastA2 eastA3 eastA4 in 1/9 , noobs clean</span>

    <span class="stres">  eastA1     eastA2     eastA3     eastA4 </span> 
    <span class="stres">.0842305   .2792741   .4647285    .171767 </span> 
    <span class="stres">.0919808   .2941363   .4554157   .1584671 </span> 
    <span class="stres">.1003661   .3088659   .4447525   .1460155 </span> 
    <span class="stres">.1094237   .3233314   .4328588   .1343861 </span> 
    <span class="stres">.1191904    .337395   .4198658   .1235489 </span> 
    <span class="stres">.1297019   .3509142    .405913    .113471 </span> 
    <span class="stres"> .140992   .3637447   .3911457   .1041176 </span> 
    <span class="stres"> .153092   .3757433   .3757126   .0954521 </span> 
    <span class="stres">.1660297   .3867706   .3597622   .0874375 </span> 

<span class="stinp">. gen xlab=_n</span>

<span class="stinp">. twoway (sca eastA1 xlab if xlab&lt;10, c(l) lpattern(dash)) <span class="stcmt">///</span>
&gt;        (sca eastA2 xlab if xlab&lt;10, c(l) msymbol(+)) <span class="stcmt">///</span>
&gt;        (sca eastA3 xlab if xlab&lt;10, c(l) msymbol(-)) <span class="stcmt">///</span>
&gt;            (sca eastA4 xlab if xlab&lt;10, c(l)), <span class="stcmt">///</span>
&gt;        legend(label(1 "Poor") label(2 "Fair") label(3 "Good") label(4 "Excellent")) <span class="stcmt">///</span>
&gt;            ylabel(0(.1).5, angle(0)) xtitle("年齡") <span class="stcmt">///</span>
&gt;            xlabel(0(1)10 0 " " 1 "20" 2 "25" 3 "30" 4 "35" 5 "40" 6 "45" 7 "50" 8 "55" 9 "60" 10 " ") <span class="stcmt">///</span>
&gt;            saving(logit02.png, replace)</span>
(note:  named style - not found in class symbol, default attributes used)
(file logit02.png saved)
</samp></pre>
            <div class="img-block"><img id="logit02" src="" alt=""></div>
        </section>
        <section>
            <h3 data-type="title_2" id="15-4">多分類邏輯迴歸（Multinomial Logistic Regression）</h3>
            <p>可用於Nominal Scale</p>
            <p><b>注意：</b>在<code>mlogit</code>中須使用relative-risk ratio，代碼為<code>rrr</code>，而非odds ratio的<code>or</code></p>
            <pre id="stlog-11" class="stlog"><samp><span class="stinp">. cd data</span>
<span class="stres">C:\Users\misti\Documents\Stata\unify\data</span>

<span class="stinp">. use "nomocc2.dta", clear</span>
(1982 General Social Survey)

<span class="stinp">. cd ..</span>
<span class="stres">C:\Users\misti\Documents\Stata\unify</span>

<span class="stinp">. numlabel _all, add</span>

<span class="stinp">. ta occ</span>

 Occupation |      Freq.     Percent        Cum.
------------+-----------------------------------
  1. Menial |<span class="stres">         31        9.20        9.20</span>
 2. BlueCol |<span class="stres">         69       20.47       29.67</span>
   3. Craft |<span class="stres">         84       24.93       54.60</span>
4. WhiteCol |<span class="stres">         41       12.17       66.77</span>
    5. Prof |<span class="stres">        112       33.23      100.00</span>
------------+-----------------------------------
      Total |<span class="stres">        337      100.00</span>

<span class="stinp">. </span>
<span class="stinp">. mlogit occ white ed exper, base(5) nolog rrr <span class="stcmt">/*以occ的第五項（Prof）作為比較對項*/</span></span>

Multinomial logistic regression                 Number of obs     = <span class="stres">       337</span>
                                                LR chi2(<span class="stres">12</span>)       = <span class="stres">    166.09</span>
                                                Prob &gt; chi2       = <span class="stres">    0.0000</span>
Log likelihood = <span class="stres">-426.80048</span>                     Pseudo R2         = <span class="stres">    0.1629</span>

------------------------------------------------------------------------------
         occ |        RRR   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
<span class="stres">1__Menial    </span>|
       white |<span class="stres">    .169601    .128058    -2.35   0.019     .0386123    .7449581</span>
          ed |<span class="stres">   .4589326   .0526071    -6.79   0.000     .3665863    .5745417</span>
       exper |<span class="stres">   .9649771   .0174053    -1.98   0.048     .9314593     .999701</span>
       _cons |<span class="stres">     100542   185937.9     6.23   0.000     2680.234     3771571</span>
-------------+----------------------------------------------------------------
<span class="stres">2__BlueCol   </span>|
       white |<span class="stres">   .5840301   .4669924    -0.67   0.501     .1218461     2.79936</span>
          ed |<span class="stres">   .4154983   .0417761    -8.74   0.000     .3411816    .5060029</span>
       exper |<span class="stres">   .9695438   .0139698    -2.15   0.032     .9425465    .9973143</span>
       _cons |<span class="stres">   210989.6   351961.2     7.35   0.000     8022.948     5548662</span>
-------------+----------------------------------------------------------------
<span class="stres">3__Craft     </span>|
       white |<span class="stres">   .2719974   .1760954    -2.01   0.044     .0764686    .9674893</span>
          ed |<span class="stres">   .5040718   .0450134    -7.67   0.000     .4231365     .600488</span>
       exper |<span class="stres">   .9920646   .0126046    -0.63   0.531      .967665    1.017079</span>
       _cons |<span class="stres">   33758.18      51243     6.87   0.000     1723.071    661385.6</span>
-------------+----------------------------------------------------------------
<span class="stres">4__WhiteCol  </span>|
       white |<span class="stres">   .8163426   .7096525    -0.23   0.815     .1485651    4.485678</span>
          ed |<span class="stres">    .653316   .0602483    -4.62   0.000     .5452883    .7827453</span>
       exper |<span class="stres">   .9989455   .0143431    -0.07   0.941     .9712254    1.027457</span>
       _cons |<span class="stres">   196.3154   330.5962     3.14   0.002     7.236457    5325.773</span>
-------------+----------------------------------------------------------------
<span class="stres">5__Prof      </span>|  (base outcome)
------------------------------------------------------------------------------
Note: <span class="stres">_cons</span> estimates baseline relative risk for each outcome.
</samp></pre>
            <p>繪圖</p>
            <pre id="stlog-12" class="stlog"><samp><span class="stinp">. margins, at(ed=(3(1)20) white=(0 1)) atmeans predict(outcome(1))   <span class="stcmt">/* atmeans:沒有出現在這便的變項全部採用平</span>
&gt; <span class="stcmt">均值 */</span></span>

Adjusted predictions                            Number of obs     = <span class="stres">       337</span>
Model VCE    : <span class="stres">OIM</span>

Expression   : <span class="stres">Pr(occ==1__Menial), predict(outcome(1))</span>

1._at        : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">           3</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

2._at        : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">           4</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

3._at        : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">           5</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

4._at        : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">           6</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

5._at        : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">           7</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

6._at        : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">           8</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

7._at        : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">           9</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

8._at        : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">          10</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

9._at        : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">          11</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

10._at       : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">          12</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

11._at       : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">          13</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

12._at       : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">          14</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

13._at       : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">          15</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

14._at       : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">          16</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

15._at       : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">          17</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

16._at       : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">          18</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

17._at       : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">          19</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

18._at       : white<span class="stres">           </span>=<span class="stres">           0</span>
               ed<span class="stres">              </span>=<span class="stres">          20</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

19._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">           3</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

20._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">           4</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

21._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">           5</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

22._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">           6</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

23._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">           7</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

24._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">           8</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

25._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">           9</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

26._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">          10</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

27._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">          11</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

28._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">          12</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

29._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">          13</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

30._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">          14</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

31._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">          15</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

32._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">          16</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

33._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">          17</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

34._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">          18</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

35._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">          19</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

36._at       : white<span class="stres">           </span>=<span class="stres">           1</span>
               ed<span class="stres">              </span>=<span class="stres">          20</span>
               exper<span class="stres">           </span>=<span class="stres">    20.50148 </span>(mean)

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         _at |
          1  |<span class="stres">   .2847358   .2012557     1.41   0.157    -.1097182    .6791898</span>
          2  |<span class="stres">   .2913794   .1868327     1.56   0.119    -.0748059    .6575647</span>
          3  |<span class="stres">   .2961046   .1722289     1.72   0.086    -.0414579    .6336671</span>
          4  |<span class="stres">   .2986642   .1578244     1.89   0.058     -.010666    .6079945</span>
          5  |<span class="stres">   .2988085   .1440105     2.07   0.038     .0165531    .5810639</span>
          6  |<span class="stres">    .296255   .1311881     2.26   0.024      .039131    .5533791</span>
          7  |<span class="stres">   .2906284   .1197501     2.43   0.015     .0559226    .5253342</span>
          8  |<span class="stres">   .2813532   .1100153     2.56   0.011     .0657272    .4969791</span>
          9  |<span class="stres">   .2674968   .1020807     2.62   0.009     .0674224    .4675712</span>
         10  |<span class="stres">   .2476236   .0955874     2.59   0.010     .0602758    .4349714</span>
         11  |<span class="stres">   .2199241   .0894971     2.46   0.014      .044513    .3953353</span>
         12  |<span class="stres">   .1832228   .0820831     2.23   0.026      .022343    .3441026</span>
         13  |<span class="stres">   .1392632   .0713996     1.95   0.051    -.0006774    .2792038</span>
         14  |<span class="stres">   .0944149   .0566498     1.67   0.096    -.0166167    .2054466</span>
         15  |<span class="stres">   .0568969   .0398907     1.43   0.154    -.0212874    .1350812</span>
         16  |<span class="stres">   .0310492   .0249947     1.24   0.214    -.0179396     .080038</span>
         17  |<span class="stres">    .015794   .0143098     1.10   0.270    -.0122526    .0438406</span>
         18  |<span class="stres">    .007688    .007718     1.00   0.319    -.0074391     .022815</span>
         19  |<span class="stres">   .1216152    .091663     1.33   0.185     -.058041    .3012714</span>
         20  |<span class="stres">   .1280056   .0847663     1.51   0.131    -.0381333    .2941445</span>
         21  |<span class="stres">   .1337186   .0768124     1.74   0.082     -.016831    .2842682</span>
         22  |<span class="stres">   .1384314   .0679656     2.04   0.042     .0052213    .2716415</span>
         23  |<span class="stres">   .1417312   .0584736     2.42   0.015      .027125    .2563374</span>
         24  |<span class="stres">   .1430724   .0486995     2.94   0.003     .0476233    .2385216</span>
         25  |<span class="stres">   .1417097   .0391864     3.62   0.000     .0649058    .2185136</span>
         26  |<span class="stres">   .1366238   .0307624     4.44   0.000     .0763306     .196917</span>
         27  |<span class="stres">   .1265451   .0245352     5.16   0.000     .0784571    .1746332</span>
         28  |<span class="stres">   .1103664   .0211691     5.21   0.000     .0688758     .151857</span>
         29  |<span class="stres">   .0882956   .0195417     4.52   0.000     .0499946    .1265966</span>
         30  |<span class="stres">   .0632224   .0175102     3.61   0.000     .0289031    .0975418</span>
         31  |<span class="stres">   .0401233   .0141726     2.83   0.005     .0123454    .0679011</span>
         32  |<span class="stres">   .0228466   .0101769     2.24   0.025     .0029003    .0427929</span>
         33  |<span class="stres">   .0119876   .0065708     1.82   0.068     -.000891    .0248661</span>
         34  |<span class="stres">   .0059588   .0039113     1.52   0.128    -.0017072    .0136249</span>
         35  |<span class="stres">   .0028659   .0021986     1.30   0.192    -.0014433    .0071752</span>
         36  |<span class="stres">    .001352   .0011884     1.14   0.255    -.0009772    .0036812</span>
------------------------------------------------------------------------------

<span class="stinp">. marginsplot, noci title("種族與成為低階工人的機率") <span class="stcmt">///</span>
&gt;              xlabel(3(1)20) ylabel(0(0.1)0.4, angle(0))</span>

  Variables that uniquely identify margins: ed white

<span class="stinp">. graph export logit03.png, replace            </span>
(file logit03.png written in PNG format)
</samp></pre>
            <div class="img-block"><img id="logit03" src="" alt=""></div>
        </section>
        <h3 data-type="title_2" id="15-5">利用Stata製作迴歸表格</h3>
        <pre id="stlog-13" class="stlog"><samp><span class="stinp">. eststo clear</span>

<span class="stinp">. eststo M1: mlogit occ white, base(5) nolog rrr</span>

Multinomial logistic regression                 Number of obs     = <span class="stres">       337</span>
                                                LR chi2(<span class="stres">4</span>)        = <span class="stres">      5.31</span>
                                                Prob &gt; chi2       = <span class="stres">    0.2566</span>
Log likelihood = <span class="stres">-507.18706</span>                     Pseudo R2         = <span class="stres">    0.0052</span>

------------------------------------------------------------------------------
         occ |        RRR   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
<span class="stres">1__Menial    </span>|
       white |<span class="stres">   .3466667    .216727    -1.69   0.090     .1018036    1.180487</span>
       _cons |<span class="stres">   .7142857   .4182429    -0.57   0.566     .2267041    2.250529</span>
-------------+----------------------------------------------------------------
<span class="stres">2__BlueCol   </span>|
       white |<span class="stres">   1.083333   .7002102     0.12   0.901     .3052037    3.845337</span>
       _cons |<span class="stres">   .5714286   .3581618    -0.89   0.372     .1672797    1.952004</span>
-------------+----------------------------------------------------------------
<span class="stres">3__Craft     </span>|
       white |<span class="stres">   .4933333   .2543871    -1.37   0.171     .1795638    1.355383</span>
       _cons |<span class="stres">   1.428571   .7040077     0.72   0.469     .5437825    3.753001</span>
-------------+----------------------------------------------------------------
<span class="stres">4__WhiteCol  </span>|
       white |<span class="stres">        1.3   1.070447     0.32   0.750     .2588488    6.528907</span>
       _cons |<span class="stres">   .2857143   .2290811    -1.56   0.118     .0593543    1.375345</span>
-------------+----------------------------------------------------------------
<span class="stres">5__Prof      </span>|  (base outcome)
------------------------------------------------------------------------------
Note: <span class="stres">_cons</span> estimates baseline relative risk for each outcome.

<span class="stinp">. eststo M2: mlogit occ white ed exper, base(5) nolog rrr</span>

Multinomial logistic regression                 Number of obs     = <span class="stres">       337</span>
                                                LR chi2(<span class="stres">12</span>)       = <span class="stres">    166.09</span>
                                                Prob &gt; chi2       = <span class="stres">    0.0000</span>
Log likelihood = <span class="stres">-426.80048</span>                     Pseudo R2         = <span class="stres">    0.1629</span>

------------------------------------------------------------------------------
         occ |        RRR   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
<span class="stres">1__Menial    </span>|
       white |<span class="stres">    .169601    .128058    -2.35   0.019     .0386123    .7449581</span>
          ed |<span class="stres">   .4589326   .0526071    -6.79   0.000     .3665863    .5745417</span>
       exper |<span class="stres">   .9649771   .0174053    -1.98   0.048     .9314593     .999701</span>
       _cons |<span class="stres">     100542   185937.9     6.23   0.000     2680.234     3771571</span>
-------------+----------------------------------------------------------------
<span class="stres">2__BlueCol   </span>|
       white |<span class="stres">   .5840301   .4669924    -0.67   0.501     .1218461     2.79936</span>
          ed |<span class="stres">   .4154983   .0417761    -8.74   0.000     .3411816    .5060029</span>
       exper |<span class="stres">   .9695438   .0139698    -2.15   0.032     .9425465    .9973143</span>
       _cons |<span class="stres">   210989.6   351961.2     7.35   0.000     8022.948     5548662</span>
-------------+----------------------------------------------------------------
<span class="stres">3__Craft     </span>|
       white |<span class="stres">   .2719974   .1760954    -2.01   0.044     .0764686    .9674893</span>
          ed |<span class="stres">   .5040718   .0450134    -7.67   0.000     .4231365     .600488</span>
       exper |<span class="stres">   .9920646   .0126046    -0.63   0.531      .967665    1.017079</span>
       _cons |<span class="stres">   33758.18      51243     6.87   0.000     1723.071    661385.6</span>
-------------+----------------------------------------------------------------
<span class="stres">4__WhiteCol  </span>|
       white |<span class="stres">   .8163426   .7096525    -0.23   0.815     .1485651    4.485678</span>
          ed |<span class="stres">    .653316   .0602483    -4.62   0.000     .5452883    .7827453</span>
       exper |<span class="stres">   .9989455   .0143431    -0.07   0.941     .9712254    1.027457</span>
       _cons |<span class="stres">   196.3154   330.5962     3.14   0.002     7.236457    5325.773</span>
-------------+----------------------------------------------------------------
<span class="stres">5__Prof      </span>|  (base outcome)
------------------------------------------------------------------------------
Note: <span class="stres">_cons</span> estimates baseline relative risk for each outcome.

<span class="stinp">. esttab M1 M2, eform se scalars(ll aic bic) mtitles label legend style(fixed) <span class="stcmt">///</span>
&gt;               varwidth(35) modelwidth(10)   <span class="stcmt">///</span>
&gt;                       starlevels(* .05 ** .01 *** 0.001)</span>

---------------------------------------------------------------
                                           (1)           (2)   
                                            M1            M2   
---------------------------------------------------------------
<span class="stres">1__Menial                                                      </span>
Race: 1=white 0=nonwhite           <span class="stres">      0.347         0.170*  </span>
                                   <span class="stres">    </span>(<span class="stres">0.217</span>)<span class="stres">       </span>(<span class="stres">0.128</span>)<span class="stres">   </span>

Years of education                 <span class="stres">                    0.459***</span>
                                   <span class="stres">                 </span>(<span class="stres">0.0526</span>)<span class="stres">   </span>

Years of work experience           <span class="stres">                    0.965*  </span>
                                   <span class="stres">                 </span>(<span class="stres">0.0174</span>)<span class="stres">   </span>
---------------------------------------------------------------
<span class="stres">2__BlueCol                                                     </span>
Race: 1=white 0=nonwhite           <span class="stres">      1.083         0.584   </span>
                                   <span class="stres">    </span>(<span class="stres">0.700</span>)<span class="stres">       </span>(<span class="stres">0.467</span>)<span class="stres">   </span>

Years of education                 <span class="stres">                    0.415***</span>
                                   <span class="stres">                 </span>(<span class="stres">0.0418</span>)<span class="stres">   </span>

Years of work experience           <span class="stres">                    0.970*  </span>
                                   <span class="stres">                 </span>(<span class="stres">0.0140</span>)<span class="stres">   </span>
---------------------------------------------------------------
<span class="stres">3__Craft                                                       </span>
Race: 1=white 0=nonwhite           <span class="stres">      0.493         0.272*  </span>
                                   <span class="stres">    </span>(<span class="stres">0.254</span>)<span class="stres">       </span>(<span class="stres">0.176</span>)<span class="stres">   </span>

Years of education                 <span class="stres">                    0.504***</span>
                                   <span class="stres">                 </span>(<span class="stres">0.0450</span>)<span class="stres">   </span>

Years of work experience           <span class="stres">                    0.992   </span>
                                   <span class="stres">                 </span>(<span class="stres">0.0126</span>)<span class="stres">   </span>
---------------------------------------------------------------
<span class="stres">4__WhiteCol                                                    </span>
Race: 1=white 0=nonwhite           <span class="stres">      1.300         0.816   </span>
                                   <span class="stres">    </span>(<span class="stres">1.070</span>)<span class="stres">       </span>(<span class="stres">0.710</span>)<span class="stres">   </span>

Years of education                 <span class="stres">                    0.653***</span>
                                   <span class="stres">                 </span>(<span class="stres">0.0602</span>)<span class="stres">   </span>

Years of work experience           <span class="stres">                    0.999   </span>
                                   <span class="stres">                 </span>(<span class="stres">0.0143</span>)<span class="stres">   </span>
---------------------------------------------------------------
<span class="stres">5__Prof                                                        </span>
Race: 1=white 0=nonwhite           <span class="stres">          1             1   </span>
                                   <span class="stres">        </span>(<span class="stres">.</span>)<span class="stres">           </span>(<span class="stres">.</span>)<span class="stres">   </span>

Years of education                 <span class="stres">                        1   </span>
                                   <span class="stres">                      </span>(<span class="stres">.</span>)<span class="stres">   </span>

Years of work experience           <span class="stres">                        1   </span>
                                   <span class="stres">                      </span>(<span class="stres">.</span>)<span class="stres">   </span>
---------------------------------------------------------------
Observations                       <span class="stres">        337           337   </span>
ll                                 <span class="stres">     -507.2        -426.8   </span>
aic                                <span class="stres">     1030.4         885.6   </span>
bic                                <span class="stres">     1060.9         946.7   </span>
---------------------------------------------------------------
Exponentiated coefficients; Standard errors in parentheses
* p&lt;.05, ** p&lt;.01, *** p&lt;0.001
</samp></pre>
        <p>將以上表格輸出為mlogit01.rtf，可用word開啟</p>
        <pre id="stlog-14" class="stlog"><samp><span class="stinp">. esttab M1 M2 using mlogit01.rtf, eform se mtitles legend style(fixed) <span class="stcmt">///</span>
&gt;         varwidth(35) modelwidth(10)  <span class="stcmt">///</span>
&gt;                 starlevels(* .05 ** .01 *** 0.001) replace</span>
(output written to mlogit01.rtf)
</samp></pre>
        <p>也可輸出為csv檔</p>
        <pre id="stlog-15" class="stlog"><samp><span class="stinp">. esttab M1 M2 using mlogit01.csv, eform se mtitles legend style(fixed) <span class="stcmt">///</span>
&gt;         varwidth(35) modelwidth(10)  <span class="stcmt">///</span>
&gt;                 starlevels(* .05 ** .01 *** 0.001) replace</span>
(output written to mlogit01.csv)
</samp></pre>
    </main>
    <footer>
        <script src="https://astalsi401.github.io/jQuery/jquery-3.6.0.min.js"></script>
        <script>
            const requestURL = '../assets/js/json/data.json'
            const picsUrl = '../assets/js/json/pics/stata015.json'
        </script>
        <script src="../assets/js/main.js"></script>
    </footer>
</body>

</html>