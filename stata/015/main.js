class Content extends React.Component {
  constructor(props) {
    super(props);
    this.section = [
      {
        title: "Odds Ratio",
        content: (
          <div>
            <p>在logistic analysis分析中，應變項必須是0或者1（有/無、是/否），自變項可以使用類別變項，也可以使用連續變項。所得到的結果更可以轉換成為機率（Odds Ratio）的概念解讀。</p>
            <div className="my-2">
              <div className="text-bold text-large">範例：</div>
              <CodeChunk code={`cd data\nuse "tracking.dta", clear\ncd ..\nta college atrack`} language="stata" />
              <CodeChunk code={`. cd data\nC:\\Users\\misti\\Documents\\Stata\\unify\\data\n\n. use "tracking.dta", clear\n\n. cd ..\nC:\\Users\\misti\\Documents\\Stata\\unify\n\n. ta college atrack\n\n            |  Tracks in High Sch\n    College | Non-acade  Academic  |     Total\n------------+----------------------+----------\nNon-college |        15          6 |        21 \n    College |         3          8 |        11 \n------------+----------------------+----------\n      Total |        18         14 |        32`} language="output" />
              <p>若詢問：升學班的人上大學大學的機率是其他人的幾倍？</p>
              <CodeChunk code={`cap drop acad\ng acad = (8/6)/(3/15)\ndi acad "倍"`} language="stata" />
              <CodeChunk code={`. cap drop acad\n\n. g acad = (8/6)/(3/15)\n\n. di acad "倍"\n6.6666665倍`} language="output" />
              <p>相對的，非升學班上大學的機率是：</p>
              <CodeChunk code={`cap drop nadac\ng nadac = (3/15)/(8/6)\ndi "0" nadac "倍"`} language="stata" />
              <CodeChunk code={`. cap drop nadac\n\n. g nadac = (3/15)/(8/6)\n\n. di "0" nadac "倍"\n0.15000001倍`} language="output" />
              <p>由此我們可知：</p>
              <ul>
                <li>Odds Ratio一定大於0</li>
                <li>當Odds Ratio&lt;1，失敗機具較高</li>
                <li>當Odds Ratio=1，成功與失敗機率各半</li>
                <li>當Odds Ratio&gt;1，成功機率較高</li>
                <li>
                  Odds Ratio值域沒有上限
                  <p>當遇到較廣闊的值域時，習慣轉換成對數</p>
                  <CodeChunk code={`/*從Odds Ratio轉換成對數*/\ndi log(6.6666665)\n\n/*從對數轉為Odds Ratio*/\ndi exp(1.89712)`} language="stata" />
                  <CodeChunk code={`. /*從Odds Ratio轉換成對數*/\n. di log(6.6666665)\n1.89712\n\n. \n. /*從對數轉為Odds Ratio*/\n. di exp(1.89712)\n6.6666668`} language="output" />
                </li>
              </ul>
            </div>
            <div className="my-2">
              <div className="text-bold text-large">計算機率</div>
              <ol type="i">
                <li>
                  在執行<code>logit</code>分析後輸入<code>predict prob, pr</code>
                  <CodeChunk code={`logit college atrack\npredict prob, pr\nta prob`} language="stata" />
                  <CodeChunk code={`. logit college atrack\n\nIteration 0:   log likelihood =  -20.59173  \nIteration 1:   log likelihood = -17.721515  \nIteration 2:   log likelihood = -17.670932  \nIteration 3:   log likelihood = -17.670815  \nIteration 4:   log likelihood = -17.670815  \n\nLogistic regression                             Number of obs     =         32\n                                                LR chi2(1)        =       5.84\n                                                Prob > chi2       =     0.0156\nLog likelihood = -17.670815                     Pseudo R2         =     0.1418\n\n------------------------------------------------------------------------------\n     college |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n      atrack |    1.89712    .831665     2.28   0.023     .2670865    3.527153\n       _cons |  -1.609438   .6324555    -2.54   0.011    -2.849028   -.3698478\n------------------------------------------------------------------------------\n\n. predict prob, pr\n\n. ta prob\n\nPr(college) |      Freq.     Percent        Cum.\n------------+-----------------------------------\n   .1666667 |         18       56.25       56.25\n   .5714286 |         14       43.75      100.00\n------------+-----------------------------------\n      Total |         32      100.00`} language="output" />
                </li>
                <li>
                  <code>margins</code>
                  <p>也適用於ordinal logistic</p>
                  <CodeChunk code={`margins, at(atrack=(0 1))`} language="stata" />
                  <CodeChunk code={`. margins, at(atrack=(0 1))\n\nAdjusted predictions                            Number of obs     =         32\nModel VCE    : OIM\n\nExpression   : Pr(college), predict()\n\n1._at        : atrack          =           0\n\n2._at        : atrack          =           1\n\n------------------------------------------------------------------------------\n             |            Delta-method\n             |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n         _at |\n          1  |   .1666667    .087841     1.90   0.058    -.0054986     .338832\n          2  |   .5714286     .13226     4.32   0.000     .3122037    .8306534\n------------------------------------------------------------------------------`} language="output" />
                </li>
              </ol>
            </div>
          </div>
        ),
      },
      {
        title: "二元邏輯迴歸（Logistic Regression）",
        content: (
          <div>
            <CodeChunk code={`logit college atrack male gpa chinese, or  /*or:以odds ratio顯示，預設為對數*/\n/*Pseudo R2: 可解釋的改變量*/`} language="stata" />
            <CodeChunk code={`. logit college atrack male gpa chinese, or  /*or:以odds ratio顯示，預設為對數*/\n\nIteration 0:   log likelihood =  -20.59173  \nIteration 1:   log likelihood = -13.063015  \nIteration 2:   log likelihood =  -12.63741  \nIteration 3:   log likelihood = -12.627923  \nIteration 4:   log likelihood = -12.627905  \nIteration 5:   log likelihood = -12.627905  \n\nLogistic regression                             Number of obs     =         32\n                                                LR chi2(4)        =      15.93\n                                                Prob > chi2       =     0.0031\nLog likelihood = -12.627905                     Pseudo R2         =     0.3867\n\n------------------------------------------------------------------------------\n     college | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n      atrack |   10.90221   11.57428     2.25   0.024     1.360942    87.33516\n        male |   2.068618   2.206442     0.68   0.496     .2557213    16.73377\n         gpa |   17.48493   22.27269     2.25   0.025     1.440074    212.2967\n     chinese |   1.038946    .049211     0.81   0.420     .9468358    1.140017\n       _cons |   6.66e-07   3.61e-06    -2.62   0.009     1.60e-11     .027769\n------------------------------------------------------------------------------\nNote: _cons estimates baseline odds.\n\n. /*Pseudo R2: 可解釋的改變量*/`} language="output" />
            <p>從表中可知，控制性別、班級、成績、中文成績之後，升學班進入大學的機率比非升學班高10.90221倍，其餘數值依此類推。</p>
            <CodeChunk code={`margins, at(gpa=(2(.5)4) atrack=(0 1)) atmeans /*繪圖*/\nmarginsplot, ylabel(0(.2)1, angle(0)) noci`} language="stata" />
            <CodeChunk
              code={`. margins, at(gpa=(2(.5)4) atrack=(0 1)) atmeans /*繪圖*/\n\nAdjusted predictions                            Number of obs     =         32\nModel VCE    : OIM\n\nExpression   : Pr(college), predict()\n\n1._at        : atrack          =           0\n               male            =      .46875 (mean)\n               gpa             =           2\n               chinese         =       72.75 (mean)\n\n2._at        : atrack          =           0\n               male            =      .46875 (mean)\n               gpa             =         2.5\n               chinese         =       72.75 (mean)\n\n3._at        : atrack          =           0\n               male            =      .46875 (mean)\n               gpa             =           3\n               chinese         =       72.75 (mean)\n\n4._at        : atrack          =           0\n               male            =      .46875 (mean)\n               gpa             =         3.5\n               chinese         =       72.75 (mean)\n\n5._at        : atrack          =           0\n               male            =      .46875 (mean)\n               gpa             =           4\n               chinese         =       72.75 (mean)\n\n6._at        : atrack          =           1\n               male            =      .46875 (mean)\n               gpa             =           2\n               chinese         =       72.75 (mean)\n\n7._at        : atrack          =           1\n               male            =      .46875 (mean)\n               gpa             =         2.5\n               chinese         =       72.75 (mean)\n\n8._at        : atrack          =           1\n               male            =      .46875 (mean)\n               gpa             =           3\n               chinese         =       72.75 (mean)\n\n9._at        : atrack          =           1\n               male            =      .46875 (mean)\n               gpa             =         3.5\n               chinese         =       72.75 (mean)\n\n10._at       : atrack          =           1\n               male            =      .46875 (mean)\n               gpa             =           4\n               chinese         =       72.75 (mean)\n\n------------------------------------------------------------------------------\n             |            Delta-method\n             |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n         _at |\n          1  |   .0045911   .0087693     0.52   0.601    -.0125964    .0217786\n          2  |   .0189213    .025328     0.75   0.455    -.0307205    .0685632\n          3  |   .0746271   .0637606     1.17   0.242    -.0503414    .1995956\n          4  |   .2521792   .1525833     1.65   0.098    -.0468785     .551237\n          5  |    .585076   .2733759     2.14   0.032     .0492692    1.120883\n          6  |   .0478766   .0726943     0.66   0.510    -.0946015    .1903547\n          7  |   .1737331   .1517106     1.15   0.252    -.1236142    .4710804\n          8  |   .4678624   .1764073     2.65   0.008     .1221105    .8136143\n          9  |   .7861616   .1404999     5.60   0.000     .5107868    1.061536\n         10  |   .9389238   .0749068    12.53   0.000     .7921092    1.085738\n------------------------------------------------------------------------------\n\n. marginsplot, ylabel(0(.2)1, angle(0)) noci\n\n  Variables that uniquely identify margins: gpa atrack`}
              language="output"
            />
            <ZoomImage class="w-lg-50 w-sm-75 mx-auto" src="https://astalsi401.github.io/assets/images/logit01.png" />
          </div>
        ),
      },
      {
        title: "順序邏輯迴歸（Ordinal Logistic Regression）",
        content: (
          <div>
            <p>可用於Ordinal Scale的應變項。</p>
            <CodeChunk code={`cd data\nuse "GSS2012.dta", clear\ncd ..\nta healthre\nologit healthre i.maritals age educ i.male`} language="stata" />
            <CodeChunk
              code={`. cd data\nC:\\Users\\misti\\Documents\\Stata\\unify\\data\n\n. use "GSS2012.dta", clear\n\n. cd ..\nC:\\Users\\misti\\Documents\\Stata\\unify\n\n. ta healthre\n\n  CONDITION |\n OF HEALTH, |\n     health |      Freq.     Percent        Cum.\n------------+-----------------------------------\n       Poor |         83        6.36        6.36\n       Fair |        275       21.06       27.41\n       Good |        598       45.79       73.20\n  Excellent |        350       26.80      100.00\n------------+-----------------------------------\n      Total |      1,306      100.00\n\n. ologit healthre i.maritals age educ i.male\n\nIteration 0:   log likelihood = -1579.4068  \nIteration 1:   log likelihood = -1513.1681  \nIteration 2:   log likelihood = -1512.4624  \nIteration 3:   log likelihood = -1512.4617  \nIteration 4:   log likelihood = -1512.4617  \n\nOrdered logistic regression                     Number of obs     =      1,300\n                                                LR chi2(4)        =     133.89\n                                                Prob > chi2       =     0.0000\nLog likelihood = -1512.4617                     Pseudo R2         =     0.0424\n\n------------------------------------------------------------------------------------\n          healthre |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------------+----------------------------------------------------------------\n          maritals |\nCurrently Married  |   .5140615   .1058075     4.86   0.000     .3066826    .7214404\n               age |  -.0193044   .0030486    -6.33   0.000    -.0252795   -.0133293\n              educ |   .1344697   .0172595     7.79   0.000     .1006417    .1682976\n                   |\n              male |\n             Male  |   .0564658    .104827     0.54   0.590    -.1489912    .2619229\n-------------------+----------------------------------------------------------------\n             /cut1 |  -1.699642   .2976496                     -2.283024   -1.116259\n             /cut2 |   .1263807   .2863167                     -.4347897    .6875511\n             /cut3 |   2.259722   .2937011                      1.684078    2.835365\n------------------------------------------------------------------------------------`}
              language="output"
            />
            <p>繪圖</p>
            <p>
              <code>forvalue i=1/4</code>：healthre有四個選項，需要分別計算
            </p>
            <p>
              <code>age=(20(5)60)</code>：x軸為年齡，從20開始，5歲為一單位，到60歲為止
            </p>
            <p>
              <code>educ=(6)</code>：這張圖中只包含educ=6的樣本
            </p>
            <p>
              <code>predict</code>：計算應變項（healthre）
            </p>
            <CodeChunk code={`forvalue i=1/4{\n    margins, at(age=(20(5)60) educ=(6)) atmeans predict(outcome(\`i'))\n    matrix b\`i'=r(b)'  /*建立名為b1~b4的矩陣以儲存healthre中的資料*/\n}\nmat eastA=b1, b2, b3, b4   /*將b1~b4合併為一個矩陣，命名為eastA*/\ncap drop eastA1 eastA2 eastA3 eastA4 xlab\nsvmat eastA, name(eastA)\nlist eastA1 eastA2 eastA3 eastA4 in 1/9 , noobs clean\ngen xlab=_n\ntwoway (sca eastA1 xlab if xlab<10, c(l) lpattern(dash)) ///\n       (sca eastA2 xlab if xlab<10, c(l) msymbol(+)) ///\n       (sca eastA3 xlab if xlab<10, c(l) msymbol(-)) ///\n       (sca eastA4 xlab if xlab<10, c(l)), ///\n       legend(label(1 "Poor") label(2 "Fair") label(3 "Good") label(4 "Excellent")) ///\n       ylabel(0(.1).5, angle(0)) xtitle("年齡") ///\n       xlabel(0(1)10 0 " " 1 "20" 2 "25" 3 "30" 4 "35" 5 "40" 6 "45" 7 "50" 8 "55" 9 "60" 10 " ") ///\n       saving(logit02.png, replace)`} language="stata" />
            <CodeChunk
              code={`. forvalue i=1/4{\n  2.         margins, at(age=(20(5)60) educ=(6)) atmeans predict(outcome(\`i'))\n  3.         matrix b\`i'=r(b)'  /*建立名為b1~b4的矩陣以儲存healthre中的資料*/\n  4. }\n\nAdjusted predictions                            Number of obs     =      1,300\nModel VCE    : OIM\n\nExpression   : Pr(healthre==1), predict(outcome(1))\n\n1._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          20\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n2._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          25\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n3._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          30\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n4._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          35\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n5._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          40\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n6._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          45\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n7._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          50\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n8._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          55\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n9._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          60\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n------------------------------------------------------------------------------\n             |            Delta-method\n             |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n         _at |\n          1  |   .0842305   .0147358     5.72   0.000     .0553489    .1131121\n          2  |   .0919808   .0153189     6.00   0.000     .0619563    .1220053\n          3  |   .1003661   .0159621     6.29   0.000     .0690809    .1316513\n          4  |   .1094237   .0166886     6.56   0.000     .0767147    .1421327\n          5  |   .1191904   .0175256     6.80   0.000     .0848409    .1535399\n          6  |   .1297019   .0185041     7.01   0.000     .0934346    .1659692\n          7  |    .140992   .0196569     7.17   0.000     .1024652    .1795188\n          8  |    .153092   .0210169     7.28   0.000     .1118996    .1942844\n          9  |   .1660297   .0226146     7.34   0.000      .121706    .2103535\n------------------------------------------------------------------------------\n\nAdjusted predictions                            Number of obs     =      1,300\nModel VCE    : OIM\n\nExpression   : Pr(healthre==2), predict(outcome(2))\n\n1._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          20\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n2._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          25\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n3._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          30\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n4._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          35\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n5._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          40\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n6._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          45\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n7._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          50\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n8._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          55\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n9._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          60\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n------------------------------------------------------------------------------\n             |            Delta-method\n             |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n         _at |\n          1  |   .2792741   .0280229     9.97   0.000     .2243502    .3341979\n          2  |   .2941363   .0271285    10.84   0.000     .2409655    .3473072\n          3  |   .3088659   .0262899    11.75   0.000     .2573387    .3603931\n          4  |   .3233314   .0255421    12.66   0.000     .2732698    .3733931\n          5  |    .337395   .0249092    13.55   0.000     .2885739     .386216\n          6  |   .3509141   .0243991    14.38   0.000     .3030927    .3987356\n          7  |   .3637447   .0240029    15.15   0.000     .3166999    .4107895\n          8  |   .3757433   .0236954    15.86   0.000     .3293011    .4221855\n          9  |   .3867706   .0234415    16.50   0.000      .340826    .4327151\n------------------------------------------------------------------------------\n\nAdjusted predictions                            Number of obs     =      1,300\nModel VCE    : OIM\n\nExpression   : Pr(healthre==3), predict(outcome(3))\n\n1._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          20\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n2._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          25\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n3._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          30\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n4._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          35\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n5._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          40\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n6._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          45\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n7._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          50\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n8._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          55\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n9._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          60\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n------------------------------------------------------------------------------\n             |            Delta-method\n             |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n         _at |\n          1  |   .4647285   .0199403    23.31   0.000     .4256463    .5038107\n          2  |   .4554157   .0208452    21.85   0.000       .41456    .4962715\n          3  |   .4447525   .0215809    20.61   0.000     .4024547    .4870503\n          4  |   .4328588   .0221839    19.51   0.000     .3893792    .4763384\n          5  |   .4198658   .0227071    18.49   0.000     .3753606     .464371\n          6  |    .405913   .0232102    17.49   0.000     .3604219    .4514041\n          7  |   .3911457   .0237489    16.47   0.000     .3445988    .4376927\n          8  |   .3757126   .0243672    15.42   0.000     .3279537    .4234714\n          9  |   .3597622   .0250908    14.34   0.000     .3105851    .4089393\n------------------------------------------------------------------------------\n\nAdjusted predictions                            Number of obs     =      1,300\nModel VCE    : OIM\n\nExpression   : Pr(healthre==4), predict(outcome(4))\n\n1._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          20\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n2._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          25\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n3._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          30\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n4._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          35\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n5._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          40\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n6._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          45\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n7._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          50\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n8._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          55\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n9._at        : 0.maritals      =    .5315385 (mean)\n               1.maritals      =    .4684615 (mean)\n               age             =          60\n               educ            =           6\n               0.male          =    .5569231 (mean)\n               1.male          =    .4430769 (mean)\n\n------------------------------------------------------------------------------\n             |            Delta-method\n             |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n         _at |\n          1  |    .171767   .0246675     6.96   0.000     .1234196    .2201144\n          2  |   .1584671   .0222366     7.13   0.000     .1148842      .20205\n          3  |   .1460155   .0201097     7.26   0.000     .1066012    .1854299\n          4  |   .1343861   .0182736     7.35   0.000     .0985704    .1702017\n          5  |   .1235489   .0167089     7.39   0.000     .0907999    .1562978\n          6  |    .113471   .0153908     7.37   0.000     .0833055    .1436365\n          7  |   .1041176   .0142903     7.29   0.000     .0761092     .132126\n          8  |   .0954521   .0133754     7.14   0.000     .0692368    .1216674\n          9  |   .0874375   .0126138     6.93   0.000     .0627148    .1121601\n------------------------------------------------------------------------------\n\n. mat eastA=b1, b2, b3, b4   /*將b1~b4合併為一個矩陣，命名為eastA*/\n\n. cap drop eastA1 eastA2 eastA3 eastA4 xlab\n\n. svmat eastA, name(eastA)\n\n. list eastA1 eastA2 eastA3 eastA4 in 1/9 , noobs clean\n\n      eastA1     eastA2     eastA3     eastA4  \n    .0842305   .2792741   .4647285    .171767  \n    .0919808   .2941363   .4554157   .1584671  \n    .1003661   .3088659   .4447525   .1460155  \n    .1094237   .3233314   .4328588   .1343861  \n    .1191904    .337395   .4198658   .1235489  \n    .1297019   .3509142    .405913    .113471  \n     .140992   .3637447   .3911457   .1041176  \n     .153092   .3757433   .3757126   .0954521  \n    .1660297   .3867706   .3597622   .0874375  \n\n. gen xlab=_n\n\n. twoway (sca eastA1 xlab if xlab<10, c(l) lpattern(dash)) ///\n>        (sca eastA2 xlab if xlab<10, c(l) msymbol(+)) ///\n>        (sca eastA3 xlab if xlab<10, c(l) msymbol(-)) ///\n>            (sca eastA4 xlab if xlab<10, c(l)), ///\n>        legend(label(1 "Poor") label(2 "Fair") label(3 "Good") label(4 "Excellent")) ///\n>            ylabel(0(.1).5, angle(0)) xtitle("年齡") ///\n>            xlabel(0(1)10 0 " " 1 "20" 2 "25" 3 "30" 4 "35" 5 "40" 6 "45" 7 "50" 8 "55" 9 "60" 10 " ") ///\n>            saving(logit02.png, replace)\n(note:  named style - not found in class symbol, default attributes used)\n(file logit02.png saved)`}
              language="output"
            />
            <ZoomImage class="w-lg-50 w-sm-75 mx-auto" src="https://astalsi401.github.io/assets/images/logit02.png" />
          </div>
        ),
      },
      {
        title: "多分類邏輯迴歸（Multinomial Logistic Regression）",
        content: (
          <div>
            <p>可用於Nominal Scale</p>
            <p>
              <b>注意：</b>在<code>mlogit</code>中須使用relative-risk ratio，代碼為<code>rrr</code>，而非odds ratio的<code>or</code>
            </p>
            <CodeChunk code={`cd data\nuse "nomocc2.dta", clear\ncd ..\nnumlabel _all, add\nta occ\n\nmlogit occ white ed exper, base(5) nolog rrr /*以occ的第五項（Prof）作為比較對項*/`} language="stata" />
            <CodeChunk
              code={`. cd data\nC:\\Users\\misti\\Documents\\Stata\\unify\\data\n\n. use "nomocc2.dta", clear\n(1982 General Social Survey)\n\n. cd ..\nC:\\Users\\misti\\Documents\\Stata\\unify\n\n. numlabel _all, add\n\n. ta occ\n\n Occupation |      Freq.     Percent        Cum.\n------------+-----------------------------------\n  1. Menial |         31        9.20        9.20\n 2. BlueCol |         69       20.47       29.67\n   3. Craft |         84       24.93       54.60\n4. WhiteCol |         41       12.17       66.77\n    5. Prof |        112       33.23      100.00\n------------+-----------------------------------\n      Total |        337      100.00\n\n. \n. mlogit occ white ed exper, base(5) nolog rrr /*以occ的第五項（Prof）作為比較對項*/\n\nMultinomial logistic regression                 Number of obs     =        337\n                                                LR chi2(12)       =     166.09\n                                                Prob > chi2       =     0.0000\nLog likelihood = -426.80048                     Pseudo R2         =     0.1629\n\n------------------------------------------------------------------------------\n         occ |        RRR   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n1__Menial    |\n       white |    .169601    .128058    -2.35   0.019     .0386123    .7449581\n          ed |   .4589326   .0526071    -6.79   0.000     .3665863    .5745417\n       exper |   .9649771   .0174053    -1.98   0.048     .9314593     .999701\n       _cons |     100542   185937.9     6.23   0.000     2680.234     3771571\n-------------+----------------------------------------------------------------\n2__BlueCol   |\n       white |   .5840301   .4669924    -0.67   0.501     .1218461     2.79936\n          ed |   .4154983   .0417761    -8.74   0.000     .3411816    .5060029\n       exper |   .9695438   .0139698    -2.15   0.032     .9425465    .9973143\n       _cons |   210989.6   351961.2     7.35   0.000     8022.948     5548662\n-------------+----------------------------------------------------------------\n3__Craft     |\n       white |   .2719974   .1760954    -2.01   0.044     .0764686    .9674893\n          ed |   .5040718   .0450134    -7.67   0.000     .4231365     .600488\n       exper |   .9920646   .0126046    -0.63   0.531      .967665    1.017079\n       _cons |   33758.18      51243     6.87   0.000     1723.071    661385.6\n-------------+----------------------------------------------------------------\n4__WhiteCol  |\n       white |   .8163426   .7096525    -0.23   0.815     .1485651    4.485678\n          ed |    .653316   .0602483    -4.62   0.000     .5452883    .7827453\n       exper |   .9989455   .0143431    -0.07   0.941     .9712254    1.027457\n       _cons |   196.3154   330.5962     3.14   0.002     7.236457    5325.773\n-------------+----------------------------------------------------------------\n5__Prof      |  (base outcome)\n------------------------------------------------------------------------------\nNote: _cons estimates baseline relative risk for each outcome.`}
              language="output"
            />
            <p>繪圖</p>
            <CodeChunk code={`margins, at(ed=(3(1)20) white=(0 1)) atmeans predict(outcome(1))   /* atmeans:沒有出現在這便的變項全部採用平均值 */\nmarginsplot, noci title("種族與成為低階工人的機率") ///\n             xlabel(3(1)20) ylabel(0(0.1)0.4, angle(0))\ngraph export logit03.png, replace     `} language="stata" />
            <CodeChunk
              code={`. margins, at(ed=(3(1)20) white=(0 1)) atmeans predict(outcome(1))   /* atmeans:沒有出現在這便的變項全部採用平\n> 均值 */\n\nAdjusted predictions                            Number of obs     =        337\nModel VCE    : OIM\n\nExpression   : Pr(occ==1__Menial), predict(outcome(1))\n\n1._at        : white           =           0\n               ed              =           3\n               exper           =    20.50148 (mean)\n\n2._at        : white           =           0\n               ed              =           4\n               exper           =    20.50148 (mean)\n\n3._at        : white           =           0\n               ed              =           5\n               exper           =    20.50148 (mean)\n\n4._at        : white           =           0\n               ed              =           6\n               exper           =    20.50148 (mean)\n\n5._at        : white           =           0\n               ed              =           7\n               exper           =    20.50148 (mean)\n\n6._at        : white           =           0\n               ed              =           8\n               exper           =    20.50148 (mean)\n\n7._at        : white           =           0\n               ed              =           9\n               exper           =    20.50148 (mean)\n\n8._at        : white           =           0\n               ed              =          10\n               exper           =    20.50148 (mean)\n\n9._at        : white           =           0\n               ed              =          11\n               exper           =    20.50148 (mean)\n\n10._at       : white           =           0\n               ed              =          12\n               exper           =    20.50148 (mean)\n\n11._at       : white           =           0\n               ed              =          13\n               exper           =    20.50148 (mean)\n\n12._at       : white           =           0\n               ed              =          14\n               exper           =    20.50148 (mean)\n\n13._at       : white           =           0\n               ed              =          15\n               exper           =    20.50148 (mean)\n\n14._at       : white           =           0\n               ed              =          16\n               exper           =    20.50148 (mean)\n\n15._at       : white           =           0\n               ed              =          17\n               exper           =    20.50148 (mean)\n\n16._at       : white           =           0\n               ed              =          18\n               exper           =    20.50148 (mean)\n\n17._at       : white           =           0\n               ed              =          19\n               exper           =    20.50148 (mean)\n\n18._at       : white           =           0\n               ed              =          20\n               exper           =    20.50148 (mean)\n\n19._at       : white           =           1\n               ed              =           3\n               exper           =    20.50148 (mean)\n\n20._at       : white           =           1\n               ed              =           4\n               exper           =    20.50148 (mean)\n\n21._at       : white           =           1\n               ed              =           5\n               exper           =    20.50148 (mean)\n\n22._at       : white           =           1\n               ed              =           6\n               exper           =    20.50148 (mean)\n\n23._at       : white           =           1\n               ed              =           7\n               exper           =    20.50148 (mean)\n\n24._at       : white           =           1\n               ed              =           8\n               exper           =    20.50148 (mean)\n\n25._at       : white           =           1\n               ed              =           9\n               exper           =    20.50148 (mean)\n\n26._at       : white           =           1\n               ed              =          10\n               exper           =    20.50148 (mean)\n\n27._at       : white           =           1\n               ed              =          11\n               exper           =    20.50148 (mean)\n\n28._at       : white           =           1\n               ed              =          12\n               exper           =    20.50148 (mean)\n\n29._at       : white           =           1\n               ed              =          13\n               exper           =    20.50148 (mean)\n\n30._at       : white           =           1\n               ed              =          14\n               exper           =    20.50148 (mean)\n\n31._at       : white           =           1\n               ed              =          15\n               exper           =    20.50148 (mean)\n\n32._at       : white           =           1\n               ed              =          16\n               exper           =    20.50148 (mean)\n\n33._at       : white           =           1\n               ed              =          17\n               exper           =    20.50148 (mean)\n\n34._at       : white           =           1\n               ed              =          18\n               exper           =    20.50148 (mean)\n\n35._at       : white           =           1\n               ed              =          19\n               exper           =    20.50148 (mean)\n\n36._at       : white           =           1\n               ed              =          20\n               exper           =    20.50148 (mean)\n\n------------------------------------------------------------------------------\n             |            Delta-method\n             |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n         _at |\n          1  |   .2847358   .2012557     1.41   0.157    -.1097182    .6791898\n          2  |   .2913794   .1868327     1.56   0.119    -.0748059    .6575647\n          3  |   .2961046   .1722289     1.72   0.086    -.0414579    .6336671\n          4  |   .2986642   .1578244     1.89   0.058     -.010666    .6079945\n          5  |   .2988085   .1440105     2.07   0.038     .0165531    .5810639\n          6  |    .296255   .1311881     2.26   0.024      .039131    .5533791\n          7  |   .2906284   .1197501     2.43   0.015     .0559226    .5253342\n          8  |   .2813532   .1100153     2.56   0.011     .0657272    .4969791\n          9  |   .2674968   .1020807     2.62   0.009     .0674224    .4675712\n         10  |   .2476236   .0955874     2.59   0.010     .0602758    .4349714\n         11  |   .2199241   .0894971     2.46   0.014      .044513    .3953353\n         12  |   .1832228   .0820831     2.23   0.026      .022343    .3441026\n         13  |   .1392632   .0713996     1.95   0.051    -.0006774    .2792038\n         14  |   .0944149   .0566498     1.67   0.096    -.0166167    .2054466\n         15  |   .0568969   .0398907     1.43   0.154    -.0212874    .1350812\n         16  |   .0310492   .0249947     1.24   0.214    -.0179396     .080038\n         17  |    .015794   .0143098     1.10   0.270    -.0122526    .0438406\n         18  |    .007688    .007718     1.00   0.319    -.0074391     .022815\n         19  |   .1216152    .091663     1.33   0.185     -.058041    .3012714\n         20  |   .1280056   .0847663     1.51   0.131    -.0381333    .2941445\n         21  |   .1337186   .0768124     1.74   0.082     -.016831    .2842682\n         22  |   .1384314   .0679656     2.04   0.042     .0052213    .2716415\n         23  |   .1417312   .0584736     2.42   0.015      .027125    .2563374\n         24  |   .1430724   .0486995     2.94   0.003     .0476233    .2385216\n         25  |   .1417097   .0391864     3.62   0.000     .0649058    .2185136\n         26  |   .1366238   .0307624     4.44   0.000     .0763306     .196917\n         27  |   .1265451   .0245352     5.16   0.000     .0784571    .1746332\n         28  |   .1103664   .0211691     5.21   0.000     .0688758     .151857\n         29  |   .0882956   .0195417     4.52   0.000     .0499946    .1265966\n         30  |   .0632224   .0175102     3.61   0.000     .0289031    .0975418\n         31  |   .0401233   .0141726     2.83   0.005     .0123454    .0679011\n         32  |   .0228466   .0101769     2.24   0.025     .0029003    .0427929\n         33  |   .0119876   .0065708     1.82   0.068     -.000891    .0248661\n         34  |   .0059588   .0039113     1.52   0.128    -.0017072    .0136249\n         35  |   .0028659   .0021986     1.30   0.192    -.0014433    .0071752\n         36  |    .001352   .0011884     1.14   0.255    -.0009772    .0036812\n------------------------------------------------------------------------------\n\n. marginsplot, noci title("種族與成為低階工人的機率") ///\n>              xlabel(3(1)20) ylabel(0(0.1)0.4, angle(0))\n\n  Variables that uniquely identify margins: ed white\n\n. graph export logit03.png, replace            \n(file logit03.png written in PNG format)`}
              language="output"
            />
            <ZoomImage class="w-lg-50 w-sm-75 mx-auto" src="https://astalsi401.github.io/assets/images/logit03.png" />
          </div>
        ),
      },
      {
        title: "利用Stata製作迴歸表格",
        content: (
          <div>
            <CodeChunk code={`eststo clear\neststo M1: mlogit occ white, base(5) nolog rrr\neststo M2: mlogit occ white ed exper, base(5) nolog rrr\nesttab M1 M2, eform se scalars(ll aic bic) mtitles label legend style(fixed) ///\n              varwidth(35) modelwidth(10)   ///\n              starlevels(* .05 ** .01 *** 0.001)`} language="stata" />
            <CodeChunk
              code={`. eststo clear\n\n. eststo M1: mlogit occ white, base(5) nolog rrr\n\nMultinomial logistic regression                 Number of obs     =        337\n                                                LR chi2(4)        =       5.31\n                                                Prob > chi2       =     0.2566\nLog likelihood = -507.18706                     Pseudo R2         =     0.0052\n\n------------------------------------------------------------------------------\n         occ |        RRR   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n1__Menial    |\n       white |   .3466667    .216727    -1.69   0.090     .1018036    1.180487\n       _cons |   .7142857   .4182429    -0.57   0.566     .2267041    2.250529\n-------------+----------------------------------------------------------------\n2__BlueCol   |\n       white |   1.083333   .7002102     0.12   0.901     .3052037    3.845337\n       _cons |   .5714286   .3581618    -0.89   0.372     .1672797    1.952004\n-------------+----------------------------------------------------------------\n3__Craft     |\n       white |   .4933333   .2543871    -1.37   0.171     .1795638    1.355383\n       _cons |   1.428571   .7040077     0.72   0.469     .5437825    3.753001\n-------------+----------------------------------------------------------------\n4__WhiteCol  |\n       white |        1.3   1.070447     0.32   0.750     .2588488    6.528907\n       _cons |   .2857143   .2290811    -1.56   0.118     .0593543    1.375345\n-------------+----------------------------------------------------------------\n5__Prof      |  (base outcome)\n------------------------------------------------------------------------------\nNote: _cons estimates baseline relative risk for each outcome.\n\n. eststo M2: mlogit occ white ed exper, base(5) nolog rrr\n\nMultinomial logistic regression                 Number of obs     =        337\n                                                LR chi2(12)       =     166.09\n                                                Prob > chi2       =     0.0000\nLog likelihood = -426.80048                     Pseudo R2         =     0.1629\n\n------------------------------------------------------------------------------\n         occ |        RRR   Std. Err.      z    P>|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n1__Menial    |\n       white |    .169601    .128058    -2.35   0.019     .0386123    .7449581\n          ed |   .4589326   .0526071    -6.79   0.000     .3665863    .5745417\n       exper |   .9649771   .0174053    -1.98   0.048     .9314593     .999701\n       _cons |     100542   185937.9     6.23   0.000     2680.234     3771571\n-------------+----------------------------------------------------------------\n2__BlueCol   |\n       white |   .5840301   .4669924    -0.67   0.501     .1218461     2.79936\n          ed |   .4154983   .0417761    -8.74   0.000     .3411816    .5060029\n       exper |   .9695438   .0139698    -2.15   0.032     .9425465    .9973143\n       _cons |   210989.6   351961.2     7.35   0.000     8022.948     5548662\n-------------+----------------------------------------------------------------\n3__Craft     |\n       white |   .2719974   .1760954    -2.01   0.044     .0764686    .9674893\n          ed |   .5040718   .0450134    -7.67   0.000     .4231365     .600488\n       exper |   .9920646   .0126046    -0.63   0.531      .967665    1.017079\n       _cons |   33758.18      51243     6.87   0.000     1723.071    661385.6\n-------------+----------------------------------------------------------------\n4__WhiteCol  |\n       white |   .8163426   .7096525    -0.23   0.815     .1485651    4.485678\n          ed |    .653316   .0602483    -4.62   0.000     .5452883    .7827453\n       exper |   .9989455   .0143431    -0.07   0.941     .9712254    1.027457\n       _cons |   196.3154   330.5962     3.14   0.002     7.236457    5325.773\n-------------+----------------------------------------------------------------\n5__Prof      |  (base outcome)\n------------------------------------------------------------------------------\nNote: _cons estimates baseline relative risk for each outcome.\n\n. esttab M1 M2, eform se scalars(ll aic bic) mtitles label legend style(fixed) ///\n>               varwidth(35) modelwidth(10)   ///\n>                       starlevels(* .05 ** .01 *** 0.001)\n\n---------------------------------------------------------------\n                                           (1)           (2)   \n                                            M1            M2   \n---------------------------------------------------------------\n1__Menial                                                      \nRace: 1=white 0=nonwhite                 0.347         0.170*  \n                                       (0.217)       (0.128)   \n\nYears of education                                     0.459***\n                                                    (0.0526)   \n\nYears of work experience                               0.965*  \n                                                    (0.0174)   \n---------------------------------------------------------------\n2__BlueCol                                                     \nRace: 1=white 0=nonwhite                 1.083         0.584   \n                                       (0.700)       (0.467)   \n\nYears of education                                     0.415***\n                                                    (0.0418)   \n\nYears of work experience                               0.970*  \n                                                    (0.0140)   \n---------------------------------------------------------------\n3__Craft                                                       \nRace: 1=white 0=nonwhite                 0.493         0.272*  \n                                       (0.254)       (0.176)   \n\nYears of education                                     0.504***\n                                                    (0.0450)   \n\nYears of work experience                               0.992   \n                                                    (0.0126)   \n---------------------------------------------------------------\n4__WhiteCol                                                    \nRace: 1=white 0=nonwhite                 1.300         0.816   \n                                       (1.070)       (0.710)   \n\nYears of education                                     0.653***\n                                                    (0.0602)   \n\nYears of work experience                               0.999   \n                                                    (0.0143)   \n---------------------------------------------------------------\n5__Prof                                                        \nRace: 1=white 0=nonwhite                     1             1   \n                                           (.)           (.)   \n\nYears of education                                         1   \n                                                         (.)   \n\nYears of work experience                                   1   \n                                                         (.)   \n---------------------------------------------------------------\nObservations                               337           337   \nll                                      -507.2        -426.8   \naic                                     1030.4         885.6   \nbic                                     1060.9         946.7   \n---------------------------------------------------------------\nExponentiated coefficients; Standard errors in parentheses\n* p<.05, ** p<.01, *** p<0.001`}
              language="output"
            />
            <p>將以上表格輸出為mlogit01.rtf，可用word開啟</p>
            <CodeChunk code={`esttab M1 M2 using mlogit01.rtf, eform se mtitles legend style(fixed) ///\n        varwidth(35) modelwidth(10)  ///\n        starlevels(* .05 ** .01 *** 0.001) replace`} language="stata" />
            <CodeChunk code={`. esttab M1 M2 using mlogit01.rtf, eform se mtitles legend style(fixed) ///\n>         varwidth(35) modelwidth(10)  ///\n>         starlevels(* .05 ** .01 *** 0.001) replace(output written to mlogit01.rtf)`} language="output" />
            <p>也可輸出為csv檔</p>
            <CodeChunk code={`esttab M1 M2 using mlogit01.csv, eform se mtitles legend style(fixed) ///\n        varwidth(35) modelwidth(10)  ///\n        starlevels(* .05 ** .01 *** 0.001) replace`} language="stata" />
            <CodeChunk code={`. esttab M1 M2 using mlogit01.csv, eform se mtitles legend style(fixed) ///\n>         varwidth(35) modelwidth(10)  ///\n>         starlevels(* .05 ** .01 *** 0.001) replace\n(output written to mlogit01.csv)`} language="output" />
          </div>
        ),
      },
    ];
  }
  render() {
    return (
      <div>
        {this.section.map((section) => (
          <Block title={section.title} content={section.content} />
        ))}
      </div>
    );
  }
}
