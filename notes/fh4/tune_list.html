<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-F8SLV521P4"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-F8SLV521P4');
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FH4調教分享</title>
    <link rel="stylesheet" type="text/css" href="../../assets/style/main.css">
</head>

<body>
    <header>
        <div id="top"></div>
        <div id="fhPage" class="sidebar"></div>
        <div id="plate"></div>
        <div id="largePic" class="largePic">
            <div id="pic"></div>
        </div>
    </header>
    <main class="container" style="width: fit-content;">
        <h1 id="tune_list">FH4調教分享</h1>
        <section>
            <input type="search" class="table-filter" data-table="order-table" placeholder="請輸入關鍵字">
        </section>
        <section>
            <table class="order-table">
                <thead>
                    <tr>
                        <th>調教者<span></span></th>
                        <th>調教名稱<span></span></th>
                        <th>性能分<span></span></th>
                        <th>車型<span></span></th>
                        <th>特性<span></span></th>
                        <th>分享代碼<span></span></th>
                    </tr>
                </thead>
                <tbody id="tuneList"></tbody>
            </table>
        </section>
    </main>
    <footer>
        <script src="https://astalsi401.github.io/jQuery/jquery-3.6.0.min.js"></script>
        <script src="../../jQuery/jquery.sortElements.js"></script>
        <script>
            const requestURL = '../../assets/js/json/data.json'
        </script>
        <script src="../../assets/js/main.js"></script>
        <script>
            $(document).ready(() => {
                fetch('../../assets/js/json/tuneList.json')
                    .then(res => {
                        return res.json()
                    })
                    .then(data => {
                        console.log(data)
                        /*匯入tuneList並製作表格*/
                        let tuneTable = "";
                        data.forEach((a) => {
                            tuneTable += `<tr><td>${a.tunner}</td>`;
                            tuneTable += `<td>${a.tuneName}</td>`;
                            tuneTable += `<td>${a.score}</td>`;
                            tuneTable += `<td>${a.carType}</td>`;
                            tuneTable += `<td>`;
                            a.preferance.forEach((b) => {
                                tuneTable += ` ${b}`;
                            });
                            tuneTable += `</td><td>${a.shareCode}</td></tr>`;
                        });
                        $("#tuneList").html(tuneTable);
                        /*show detail*/
                        $('#tuneList tr').click(function (e) {
                            let index = data[$(this).index()],
                                carType = $(this).find('td').eq(3)
                            if ($(this).hasClass('active') && $(e.target).prop('tagName') !== 'IMG') {
                                $(this).removeClass('active')
                                carType.html(`${index.carType}`)
                            } else {
                                $(this).addClass('active')
                                carType.html(`${index.carType}<div class="img-block"><img src="${index.pic}"><span></span></div>`)
                            }
                        });
                    })
                /*點擊圖片放大&縮小 tuneList專用*/
                $(document).click((e) => {
                    if ($(e.target).prop('tagName') === 'IMG' && $(e.target).parent().hasClass('img-block')) {
                        $(".largePic").addClass("active");
                        $("#pic").html(e.target);
                        $(".largePic").click(() => {
                            $(".largePic").removeClass("active");
                        });
                    }
                })
            })
        </script>
    </footer>
</body>

</html>